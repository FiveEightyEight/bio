---
import "@fontsource/geist-sans";
import { Icon } from "astro-icon/components";
import Nav from "../components/Nav.astro";
import ProjectItem from "../components/ProjectItem.astro";
import WorkExp from "../components/WorkExp.astro";
import Footer from "../components/Footer.astro";
import SEO from "../components/SEO.astro";
import SocialLink from "../components/SocialLink.astro";
import projects from "../data/projects";
---

<html lang="en">
	<!--
		 ___       __    _______    ___        ________   ________   _____ ______    _______      
		 |\  \     |\  \ |\  ___ \  |\  \      |\   ____\ |\   __  \ |\   _ \  _   \ |\  ___ \     
		 \ \  \    \ \  \\ \   __/| \ \  \     \ \  \___| \ \  \|\  \\ \  \\\__\ \  \\ \   __/|    
		  \ \  \  __\ \  \\ \  \_|/__\ \  \     \ \  \     \ \  \\\  \\ \  \\|__| \  \\ \  \_|/__  
		   \ \  \|\__\_\  \\ \  \_|\ \\ \  \____ \ \  \____ \ \  \\\  \\ \  \    \ \  \\ \  \_|\ \ 
		    \ \____________\\ \_______\\ \_______\\ \_______\\ \_______\\ \__\    \ \__\\ \_______\
		     \|____________| \|_______| \|_______| \|_______| \|_______| \|__|     \|__| \|_______|

			ðŸš§ Site Under Construction ðŸš§

		Thanks for checking out the source code! I am still putting together the idea for what I want this to be; stay tuned...
	-->

	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Robert Abreu Bio" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link
			rel="icon"
			type="image/svg+xml"
			href="R_NBG_WHITE.svg"
			media="(prefers-color-scheme: dark)"
		/>
		<link
			rel="icon"
			type="image/svg+xml"
			href="R_NBG_BLACK.svg"
			media="(prefers-color-scheme: light)"
		/>
		<SEO />
		<style>
			.icon-container {
				display: inline-block;
				transition: transform 0.5s ease;
			}
			h1 {
				clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
			}
			h2 {
				clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
			}
			.rabreu {
				transform: translateY(115px);
				transition: transform 0.5s;
			}
		</style>
	</head>
	<body class="bg-gray-950">
		<Nav />
		<main
			id="main"
			class="flex flex-col min-h-[100dvh] bg-gray-950 text-gray-50 -mt-5"
		>
			<header
				class="-mt-10 px-4 py-8 md:px-6 md:py-12 lg:px-8 lg:py-16 xl:px-10 xl:py-20 h-screen"
			>
				<div
					class="flex flex-col h-full my-auto mx-auto max-w-3xl space-y-2 justify-center items-center"
				>
					<h1
						class="flex flex-row text-4xl font-bold tracking-tighter sm:text-5xl md:text-6xl lg:text-7xl"
					>
						<div class="rabreu">R</div><div class="rabreu">
							o
						</div><div class="rabreu">b</div><div class="rabreu">
							e
						</div><div class="rabreu">r</div><div class="rabreu">
							t
						</div><div class="rabreu">&nbsp;</div><div
							class="rabreu"
						>
							A
						</div><div class="rabreu">b</div><div class="rabreu">
							r
						</div><div class="rabreu">e</div><div class="rabreu">
							u
						</div>
					</h1>
					<p
						id="subtitle"
						class="text-lg text-gray-400 md:text-xl lg:text-2xl"
					>
						Welcome
					</p>
					<div class="grid grid-cols-2 gap-2">
						<SocialLink
							href="https://github.com/FiveEightyEight"
							name="github"
							label="GitHub"
						/>
						<SocialLink
							href="https://www.linkedin.com/in/robert-abreu/"
							name="linkedin"
							label="LinkedIn"
						/>
					</div>
				</div>
				<div class="project-button-link grid grid-rows-2 justify-center justify-items-center -mt-40 md:-mt-20 lg:-mt-10 ">
					<p class="text-md text-gray-50 mb-4 text-center">View Projects</p>
					<a
						class="grid place-items-center content-center w-10 h-10 rounded-full bg-gray-50 animate-bounce"
						href="#projects"
					>
						<Icon
							class="h-6 w-6 min-w-4 text-indigo-600"
							name={"arrow-down"}
						/>
					</a>
				</div>
			</header>
			<div class="flex-1 px-4 md:px-6 lg:px-8 xl:px-10">
				<div
					class="mx-auto max-w-3xl space-y-12 py-12 md:space-y-16 md:py-16 lg:space-y-20 lg:py-20 xl:space-y-24 xl:py-24"
				>
					<section class="grid gap-6 md:gap-8 lg:gap-10 xl:gap-12">
						<div
							id="projects"
							class="flex flex-col justify-center h-full"
						>
							<h2
								class="flex flex-row text-2xl font-bold tracking-tighter md:text-3xl lg:text-4xl"
							>
								<div class="projects-header-char">P</div>
								<div class="projects-header-char">r</div><div
									class="projects-header-char"
								>
									o
								</div><div class="projects-header-char">
									j
								</div><div class="projects-header-char">
									e
								</div><div class="projects-header-char">c</div>
								<div class="projects-header-char">t</div>
								<div class="projects-header-char">s</div>
							</h2>
							<div
								class="grid max-w-2xl grid-cols-1 gap-x-8 gap-y-20 lg:mx-0 lg:max-w-none lg:grid-cols-3"
							>
								{
									projects &&
										projects.map((project) => (
											<ProjectItem {...project} />
										))
								}
							</div>
						</div>

						<div
							id="work-experience"
							class="flex flex-col justify-center h-full md:h-screen mb-3 md:mb-0 space-y-2"
						>
							<h2
								class="flex flex-row text-2xl font-bold tracking-tighter md:text-3xl lg:text-4xl"
							>
								<div class="xp-left">W</div><div
									class="xp-left"
								>
									o
								</div><div class="xp-left">r</div><div
									class="xp-left"
								>
									k
								</div>&nbsp;<div class="xp-left">E</div><div
									class="xp-center"
								>
									xp
								</div><div class="xp-right">e</div><div
									class="xp-right"
								>
									r
								</div><div class="xp-right">i</div><div
									class="xp-right"
								>
									e
								</div><div class="xp-right">n</div><div
									class="xp-right"
								>
									c
								</div><div class="xp-right">e</div>
							</h2>
							<WorkExp />
						</div>

						<div
							id="skills"
							class="flex flex-col justify-center h-full md:h-screen mb-3 md:mb-0 space-y-2"
						>
							<h2
								class="flex flex-row text-2xl font-bold tracking-tighter md:text-3xl lg:text-4xl"
							>
								<div class="skills-header-char">S</div>
								<div class="skills-header-char">k</div><div
									class="skills-header-char"
								>
									i
								</div><div class="skills-header-char">
									l
								</div><div class="skills-header-char">
									l
								</div><div class="skills-header-char">s</div>
							</h2>
							<div
								class="grid grid-cols-2 gap-4 md:grid-cols-3 md:gap-6 lg:grid-cols-4 lg:gap-8"
							>
								<div
									class="skill rounded-lg bg-gray-900 px-4 py-2 text-center text-sm font-medium md:px-6 md:py-3 md:text-base lg:px-8 lg:py-4 lg:text-lg"
								>
									React
								</div>
								<div
									class="skill rounded-lg bg-gray-900 px-4 py-2 text-center text-sm font-medium md:px-6 md:py-3 md:text-base lg:px-8 lg:py-4 lg:text-lg"
								>
									Node.js
								</div>
								<div
									class="skill rounded-lg bg-gray-900 px-4 py-2 text-center text-sm font-medium md:px-6 md:py-3 md:text-base lg:px-8 lg:py-4 lg:text-lg"
								>
									JavaScript
								</div>
								<div
									class="skill rounded-lg bg-gray-900 px-4 py-2 text-center text-sm font-medium md:px-6 md:py-3 md:text-base lg:px-8 lg:py-4 lg:text-lg"
								>
									TypeScript
								</div>
								<div
									class="skill rounded-lg bg-gray-900 px-4 py-2 text-center text-sm font-medium md:px-6 md:py-3 md:text-base lg:px-8 lg:py-4 lg:text-lg whitespace-nowrap"
								>
									React Native
								</div>
								<div
									class="skill rounded-lg bg-gray-900 px-4 py-2 text-center text-sm font-medium md:px-6 md:py-3 md:text-base lg:px-8 lg:py-4 lg:text-lg"
								>
									GraphQL
								</div>
								<div
									class="skill rounded-lg bg-gray-900 px-4 py-2 text-center text-sm font-medium md:px-6 md:py-3 md:text-base lg:px-8 lg:py-4 lg:text-lg"
								>
									Python
								</div>
								<div
									class="skill rounded-lg bg-gray-900 px-4 py-2 text-center text-sm font-medium md:px-6 md:py-3 md:text-base lg:px-8 lg:py-4 lg:text-lg"
								>
									CSS
								</div>
								<div
									class="skill rounded-lg bg-gray-900 px-4 py-2 text-center text-sm font-medium md:px-6 md:py-3 md:text-base lg:px-8 lg:py-4 lg:text-lg"
								>
									Git
								</div>
								<div
									class="skill rounded-lg bg-gray-900 px-4 py-2 text-center text-sm font-medium md:px-6 md:py-3 md:text-base lg:px-8 lg:py-4 lg:text-lg whitespace-nowrap"
								>
									SQL
								</div>
								<div
									class="skill rounded-lg bg-gray-900 px-4 py-2 text-center text-sm font-medium md:px-6 md:py-3 md:text-base lg:px-8 lg:py-4 lg:text-lg"
								>
									AWS
								</div>
							</div>
						</div>
						<!-- <div class="space-y-2">
							<h2
								class="text-2xl font-bold tracking-tighter md:text-3xl lg:text-4xl"
							>
								Education
							</h2>
							<div class="space-y-4">
								<div class="grid gap-2 md:gap-3 lg:gap-4">
									<div
										class="flex items-center justify-between"
									>
										<h3
											class="text-lg font-semibold md:text-xl lg:text-2xl"
										>
											Bachelor's in Computer Information
											Systems
										</h3>
										<p
											class="text-sm text-gray-400 md:text-base lg:text-lg"
										>
											2006 - 2010
										</p>
									</div>
									<p
										class="text-sm text-gray-400 md:text-base lg:text-lg"
									>
										DeVry University
									</p>
								</div>
							</div>
						</div> -->
						<div
							id="connect"
							class="flex flex-col justify-center h-full md:h-screen mb-3 md:mb-0 space-y-2"
						>
							<h2
								class="text-2xl font-bold tracking-tighter md:text-3xl lg:text-4xl"
							>
								Connect
							</h2>
							<div class="space-y-4">
								<form
									action="https://formspree.io/f/xjvndyrr"
									method="POST"
									class="lg:flex-auto"
									onsubmit="this.submit(); this.reset(); return false;"
								>
									<div
										class="grid grid-cols-1 gap-x-8 gap-y-6 sm:grid-cols-2"
									>
										<div class="col-span-2">
											<label
												for="contact-name"
												class="block text-sm font-semibold leading-6 text-gray-50"
												>Name</label
											>
											<div class="mt-2.5">
												<input
													type="text"
													name="contact-name"
													id="contact-name"
													autocomplete="given-name"
													class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-950 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
												/>
											</div>
										</div>
										<div class="col-span-2">
											<label
												for="email"
												class="block text-sm font-semibold leading-6 text-gray-50"
												>Email - (Required)</label
											>
											<div class="mt-2.5">
												<input
													type="email"
													name="email"
													id="email"
													autocomplete="family-name"
													class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-950 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
													required
												/>
											</div>
										</div>
										<div class="sm:col-span-2">
											<label
												for="message"
												class="block text-sm font-semibold leading-6 text-gray-50"
												>Message - (Required)</label
											>
											<div class="mt-2.5">
												<textarea
													id="message"
													name="message"
													rows="4"
													class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-950 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
													required></textarea>
											</div>
										</div>
									</div>
									<div class="mt-10">
										<button
											type="submit"
											class="block w-full rounded-md bg-indigo-600 px-3.5 py-2.5 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"
											>Let&apos;s talk</button
										>
									</div>
								</form>
							</div>
						</div>
					</section>
				</div>
			</div>
			<Footer is:inline />
		</main>
		<script
			src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/TextPlugin.min.js"
			is:inline></script>
		<script
			src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"
			is:inline></script>
		<script
			src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollToPlugin.min.js"
			is:inline></script>
		<script type="module" is:inline>
			import gsap from "https://cdn.skypack.dev/gsap";
			document.addEventListener("DOMContentLoaded", function () {
				const nameElement = document.getElementById("subtitle");
				gsap.registerPlugin(TextPlugin);
				const gsapTL = gsap.timeline();
				gsapTL.set(nameElement, { y: -100, scale: 2.5 });
				gsapTL.from(nameElement, {
					duration: 0.3,
					opacity: 0,
					delay: 0.4,
					ease: "power3.out",
				});
				gsapTL.to(nameElement, {
					duration: 1.8,
					delay: 0.5,
					scale: 1,
					y: 0,
					ease: "power3.out",
				});
				gsapTL.to(
					".rabreu",
					{
						y: 0,
						stagger: 0.09,
						delay: 0.2,
						duration: 0.1,
						ease: "power3.out",
					},
					"<",
				);
				gsapTL.to(
					nameElement,
					{
						duration: 1.5,
						text: "Software Engineer",
						ease: "steps(17)",
					},
					"<",
				);
				gsapTL.from(".nav-link", {
					stagger: 0.15,
					duration: 1.8,
					delay: 0.2,
					opacity: 0,
				});
				gsapTL.from(
					".social-links",
					{
						stagger: 0.15,
						duration: 1.8,
						delay: 0.2,
						opacity: 0,
					},
					"<",
				);
				gsapTL.from(
					".project-button-link",
					{
						duration: 1.8,
						opacity: 0,
						delay: .7,
						ease: "power3.out",
					},
					"<",
				)
				gsap.registerPlugin(ScrollTrigger);
				const workXpTL = gsap.timeline({
					scrollTrigger: {
						trigger: ".xp-right",
						start: "top 80%",
						end: "bottom 20%",
						toggleActions: "play none none none",
					},
				});
				workXpTL.from(".xp-right", {
					y: 50,
					stagger: 0.09,
					delay: 0.3,
					duration: 0.5,
					ease: "rough",
					reversed: true,
				});
				workXpTL.from(
					".xp-left",
					{
						y: 50,
						stagger: 0.09,
						delay: 0.2,
						duration: 0.5,
						ease: "power3.out",
					},
					"<",
				);
				workXpTL.from("#work-experience-content", {
					duration: 1.8,
					opacity: 0,
				});

				const projectsTL = gsap.timeline({
					scrollTrigger: {
						trigger: "#projects",
						start: "top 80%",
						end: "bottom 20%",
						toggleActions: "play none none none",
					},
				});
				projectsTL.from(".projects-header-char", {
					y: 50,
					stagger: 0.09,
					delay: 0.3,
					duration: 0.5,
					ease: "power3.out",
				});
				projectsTL.to(".project-button-link", {
					opacity: 0,
					duration: 0.5,
					ease: "power3.out",
				});
				gsap.utils.toArray(".project").forEach((project) => {
					const randomDuration = gsap.utils.random(0.5, 5, 1.5);
					projectsTL.add(
						gsap.from(project, {
							duration: randomDuration,
							delay: 0.02,
							opacity: 0,
							ease: "power3.out",
						}),
						"<",
					);
				});

				const skillsTL = gsap.timeline({
					scrollTrigger: {
						trigger: "#skills",
						start: "top 80%",
						end: "bottom 20%",
						toggleActions: "play none none none",
					},
				});
				skillsTL.from(".skills-header-char", {
					y: 50,
					stagger: 0.09,
					delay: 0.3,
					duration: 0.5,
					ease: "power3.out",
				});
				gsap.utils.toArray(".skill").forEach((skill) => {
					const randomDuration = gsap.utils.random(0.5, 5, 1.5);
					skillsTL.add(
						gsap.from(skill, {
							duration: randomDuration,
							delay: 0.02,
							opacity: 0,
							ease: "power3.out",
						}),
						"<",
					);
				});
				gsap.registerPlugin(ScrollToPlugin);
				function getSamePageAnchor(link) {
					if (
						link.protocol !== window.location.protocol ||
						link.host !== window.location.host ||
						link.pathname !== window.location.pathname ||
						link.search !== window.location.search
					) {
						return false;
					}

					return link.hash;
				}

				// Scroll to a given hash, preventing the event given if there is one
				function scrollToHash(hash, e) {
					const elem = hash ? document.querySelector(hash) : false;
					if (elem) {
						if (e) e.preventDefault();
						const nav = document.querySelector("nav");
						gsap.to(window, {
							scrollTo: {
								y: elem,
								x: 0,
								offsetY: nav.offsetHeight,
							},
						});
					}
				}
				document.querySelectorAll("a[href]").forEach((link) => {
					link.addEventListener("click", function (e) {
						scrollToHash(getSamePageAnchor(link), e);
					});
				});
				let timeoutId;
				document.addEventListener("scroll", () => {
					clearTimeout(timeoutId);
					// debounce with setTimeout
					timeoutId = setTimeout(() => {
						const header = document.querySelector("header");
						const mainNav = document.getElementById("main-nav");
						const headerRect = header.getBoundingClientRect();
						const opacity = window
							.getComputedStyle(mainNav)
							.getPropertyValue("opacity");
						if (headerRect.bottom < 100 && opacity !== "1") {
							gsap.timeline()
								.to(mainNav, {
									duration: 1,
									opacity: 1,
								})
								.set(mainNav, { opacity: 1 });
						} else if (headerRect.bottom > 100 && opacity !== "0") {
							gsap.timeline()
								.to(mainNav, {
									duration: 1,
									opacity: 0,
								})
								.set(mainNav, { opacity: 0 });
						}
					}, 100);
				});
				const mobileButton = document.getElementById("menu-button");
				const mobileMenu = document.getElementById("mobile-menu");
				let mobileMenuTimeoutId;
				const toggleMobileMenu = (event) => {
					clearTimeout(mobileMenuTimeoutId);
					// debounce with setTimeout
					mobileMenuTimeoutId = setTimeout(() => {
						if (mobileMenu.classList.contains("hidden")) {
							mobileMenu.classList.remove("hidden");
						} else {
							mobileMenu.classList.add("hidden");
						}
					}, 150);
				};
				mobileButton.addEventListener("touchstart", toggleMobileMenu);
				mobileButton.addEventListener("mousedown", toggleMobileMenu);
			});
		</script>
	</body><!-- 
			 _______  _                _______  _         _                   _______  _         _           
			(_______)(_)              (_______)(_)       | |      _          (_______)(_)       | |      _   
			 _____    _  _   _  _____  _____    _   ____ | |__  _| |_  _   _  _____    _   ____ | |__  _| |_ 
			|  ___)  | || | | || ___ ||  ___)  | | / _  ||  _ \(_   _)| | | ||  ___)  | | / _  ||  _ \(_   _)
			| |      | | \ V / | ____|| |_____ | |( (_| || | | | | |_ | |_| || |_____ | |( (_| || | | | | |_ 
			|_|      |_|  \_/  |_____)|_______)|_| \___ ||_| |_|  \__) \__  ||_______)|_| \___ ||_| |_|  \__)
			                                      (_____|             (____/             (_____|             
	 -->
</html>
